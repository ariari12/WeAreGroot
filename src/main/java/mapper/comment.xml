<?xml version="1.0" encoding="UTF-8"?>
	<!DOCTYPE mapper
	  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.moran.comment">

	<!-- Board의 댓글 목록 -->
	<select id="SelectCommentBybId" parameterType="int" resultType="kr.co.moran.web.vo.CommentVO">
		SELECT 
			c_id as cId, 
			b_id as bId, 
			m_id as mId, 
			c_parent_id as cParentId,
			c_contents as contents, 
			c_like_cnt as likeCnt
		FROM COMMENT
		WHERE b_id = #{bId}
		ORDER BY c_regdate DESC
	</select>

	<!-- 댓글 작성 -->
	<insert id="InsertComment" parameterType="kr.co.moran.web.vo.CommentVO">
		INSERT INTO COMMENT (b_id, c_contents, c_like_cnt, c_parent_id, c_regdate, m_id) VALUES
		(#{bId}, #{contents}, 0, NULL, NOW(), #{mId} )
	</insert>
	
	<!-- 댓글 수정 -->
	<update id="ModifyComment" >
		UPDATE COMMENT
		SET c_contents = #{contents}
		WHERE c_id = #{cId}
	</update>
	
	<!-- 댓글 좋아요 -->
	<update id="ModifyCommentLikeCntBycId" parameterType="int">
		UPDATE COMMENT
		SET c_like_cnt = c_like_cnt + 1
		WHERE c_id = #{cId}
	</update>
	
	<!-- 댓글 삭제 -->
	<delete id="DeleteComment">
		DELETE FROM COMMENT WHERE c_id = #{cId}
	</delete>
</mapper>